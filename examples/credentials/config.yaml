namespace: accounts
version: "1.0"

# Configuration file - SAFE TO COMMIT
# Uses placeholders that are resolved from environment variables

sources:
  accountdb:
    adapter: filesystem
    # Connection uses environment variable
    connection: "${DB_PATH}"
    options:
      # Format from environment with default value
      format: "${DB_FORMAT:-json}"

mappings:
  account-crud:
    object: Account
    source: accountdb
    operations:
      insert:
        statement: "accounts/{id}.json"
        parameters:
          - object: ID
            field: id
        properties:
          - object: ID
            field: id
          - object: Username
            field: username
          - object: Email
            field: email
          - object: Role
            field: role

      fetch:
        statement: "accounts/{id}.json"
        parameters:
          - object: ID
            field: id
        result:
          type: Account
          properties:
            - object: ID
              field: id
            - object: Username
              field: username
            - object: Email
              field: email
            - object: Role
              field: role

      update:
        statement: "accounts/{id}.json"
        parameters:
          - object: ID
            field: id
        properties:
          - object: ID
            field: id
          - object: Username
            field: username
          - object: Email
            field: email
          - object: Role
            field: role

      delete:
        statement: "accounts/{id}.json"
        parameters:
          - object: ID
            field: id
